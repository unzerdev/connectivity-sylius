{% extends '@SyliusAdmin/shared/layout/base.html.twig' %}


{% block title %}Unzer{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/syliusunzerplugin/admin-ui/css/index.css') }}"/>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        console.log({{ stores|json_encode|raw }})
        Unzer = {
            config: {
                apiUrl: "/admin/unzer/api",
                connectionUrl: "/admin/unzer/api/connection",
                paymentMethodsUrl: "/admin/unzer/api/paymentMethod",
                storeUrl: "/admin/unzer/api/store",
                countryUrl: "/admin/unzer/api/country",
                credentialUrl: "/admin/unzer/api/credential",
                appPath: "{{ path('unzer_admin_config') }}/",
                stores: {{ stores|json_encode|raw }},
                store: {{ store|json_encode|raw }},
                version: {{ version|json_encode|raw }},
                imagesUrl: "{{ asset('bundles/syliusunzerplugin/admin-ui/images') }}",
                flagsUrl:  "{{ asset('bundles/syliusunzerplugin/admin-ui/images/flags') }}",
                locales: {{ locales|json_encode|raw }},
                currentLocale: {{ currentLocale|json_encode|raw}},
                chargeStatusFlag: false
            },
            connectionData : {
                'privateKey': "{{ connectionData.privateKey is defined ? connectionData.privateKey : '' }}",
                'publicKey': "{{ connectionData.publicKey is defined ? connectionData.publicKey : '' }}"
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            Unzer.stateController.start();
        });
    </script>
    <script type="application/javascript" src="{{ asset('bundles/syliusunzerplugin/admin-ui/js/index.js') }}"></script>
    <link rel="stylesheet" href="https://static.unzer.com/v1/unzer.css" />
    <script type="text/javascript" src="https://static.unzer.com/v1/checkout.js"></script>


{% endblock %}

{% set header = 'Your header value' %}
{% set configuration = 'Config value' %}


{% block body %}
    {% hook 'sylius_unzer.admin.config' %}
{% endblock %}
